
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.tailwindcss.com"></script>


    <style>
             *{
    margin: 0px;
    padding: 0;
    box-sizing: border-box;
}
body{
    width: 100%;
    background-color: rgba(211, 211, 211, 0.188);
}

        #check:checked ~ #menu{
            display: block;
            left: 0%;
            width: 100%;
        }
     
.image{
    padding-top: 10px;
    margin: auto;
    width: 100px;
    height: 100px;
    border-radius: 50%;
}
.fa-star{
    color: green;
}



#searchBar{
    padding-top: 2px;
}
#searchBar::placeholder{
   font-size: 14px;
   width: 130%;
}

@media screen and (max-width: 630px) {

#searchBar::placeholder{
   font-size: 10px;
   width: 80%;
   
}
#searchBar{
    padding-top: 0px;
    padding-bottom: 2px;
}
}

    </style>
</head>


<body>

    <nav class="z-10 fixed h-20 w-full bg-slate-100 shadow">
       <div class="leading-[80px]">
         <input type="checkbox" id="check" class="hidden">

        <label for="check" class="text-lg float-right leading-[80px] mr-6 sm:mr-10 block sm:hidden">
            <i class="fas fa-bars"></i>
        </label>

            <span class="absolute sm:top-4 sm:left-5 top-5 left-6">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 61 61" class="mr-2 sm:w-16 sm:h-12 w-12 h-10">
                    <path fill="#2bd271" d="M.32 30.5c0-12.966 0-19.446 3.498-23.868a16.086 16.086 0 0 1 2.634-2.634C10.868.5 17.354.5 30.32.5s19.446 0 23.868 3.498c.978.774 1.86 1.656 2.634 2.634C60.32 11.048 60.32 17.534 60.32 30.5s0 19.446-3.498 23.868a16.086 16.086 0 0 1-2.634 2.634C49.772 60.5 43.286 60.5 30.32 60.5s-19.446 0-23.868-3.498a16.086 16.086 0 0 1-2.634-2.634C.32 49.952.32 43.466.32 30.5Z"/>
                    <path fill="#fff" fill-rule="evenodd" d="M32.317 24.065v-6.216a.735.735 0 0 0-.732-.732.735.735 0 0 0-.732.732v7.302c0 .414.336.744.744.744h.714c10.374 0 11.454.54 10.806 2.73-.03.108-.066.21-.102.324-.006.024-.012.048-.018.066-2.724 8.214-10.092 18.492-12.27 21.432a.764.764 0 0 1-1.23 0c-1.314-1.776-4.53-6.24-7.464-11.304-.198-.462-.294-1.542 2.964-1.542h3.984c.222 0 .402.18.402.402v3.216c0 .384.282.738.666.768a.73.73 0 0 0 .582-.216.701.701 0 0 0 .216-.516v-4.362a.76.76 0 0 0-.756-.756h-8.052c-1.404 0-2.256-1.2-2.814-2.292-1.752-3.672-3.006-7.296-3.006-10.152 0-7.314 5.832-13.896 13.884-13.896 7.17 0 12.6 5.214 13.704 11.52.006.054.048.294.054.342.288 3.096-7.788 2.742-11.184 2.76a.357.357 0 0 1-.36-.36v.006Z" clip-rule="evenodd"></path>
                </svg>
            </span>

        <a href=""class="ml-24" ><span class="font-bold underline text-xs sm:text-sm">Others  <span class="text-green-600" ><i class="fa-solid fa-angle-down"></i></span></span></a>
        <label for="searchBar" class="text-xs sm:text-sm absolute left-[169px] sm:left-[334px] top-[42px] sm:top-[41px] transform -translate-y-1/2 text-gray-500 z-10 pointer-events-none"><i class="fa-solid fa-magnifying-glass"></i></label>
        <input type="text" class="search-bar sm:text-xs w-36 sm:w-[300px] pl-8 sm:pl-10 outline-0 h-[28px] sm:h-[38px] ml-2 sm:ml-40 text-slate-900 truncate border rounded " id="searchBar" placeholder="Search for Chicken">
        <ul id="menu" class="navBar pt-10 sm:pt-0 fixed sm:static left-[-100%] sm:left-0 h-screen transition-all duration-300 ease-in-out bg-slate-800 sm:bg-slate-100 sm:float-right sm:mr-10 sm:h-full sm:block hidden">
            <li class="block sm:inline-block leading-[80px] mx-1 sm:mx-3 text-center "><a href="#" id="signinbtn" class="text-lg sm:text-base text-white sm:text-stone-800 hover:text-amber-500 px-4 py-2  rounded-md hover:bg-white transition-all duration-75"><i class="fa-regular fa-user"></i>&nbsp;Profile</a></li>
            <li class="block sm:inline-block leading-[80px] mx-1 sm:mx-3 text-center "><a href="#" id="offerlink" class="text-lg sm:text-base text-white sm:text-stone-800 hover:text-amber-500 px-4 py-2  rounded-md hover:bg-white transition-all duration-75"><i class="fa-solid fa-tag"></i>&nbsp;Offer</a></li>
            <li class="block sm:inline-block leading-[80px] mx-1 sm:mx-3 text-center "><a href="#" id="all" class="text-lg sm:text-base text-white sm:text-stone-800 hover:text-amber-500 px-4 py-2  rounded-md hover:bg-white transition-all duration-75"><i class="fa-solid fa-layer-group"></i>&nbsp;All</a></li>
            <li class="block sm:inline-block leading-[80px] mx-1 sm:mx-3 text-center "><a href="#" id="" class="text-lg sm:text-base text-white sm:text-stone-800 hover:text-amber-500 px-4 py-2  rounded-md hover:bg-white transition-all duration-75"><i class="fa-regular fa-handshake"></i> &nbsp;Help</a></li>
            <li class="block sm:inline-block leading-[80px] mx-1 sm:mx-3 text-center "><a href="#" id="cart" class="text-lg sm:text-base text-white sm:text-stone-800 hover:text-amber-500 px-4 py-2  rounded-md hover:bg-white transition-all duration-75"><i class="fa-sharp fa-solid fa-cart-shopping"></i>&nbsp;Cart</a></li>
        </ul>
     </div>
    </nav>
    <main class="pt-20">
        <div id="container" class="flex flex-wrap justify-evenly md:justify-start gap-x-2 gap-y-4 m-auto px-1 pt-10">

        </div>
    </main>

    <script>

 localStorage.clear();
 const container = document.getElementById("container");
 const addtocart = document.getElementById('addtocart');
 const tickSound = new Audio('./click.mp3'); 
 const deleteSound = new Audio('./delete.mp3');
 
 const cart = document.getElementById('cart');

const searchBar = document.getElementById('searchBar');



let cardState = JSON.parse(localStorage.getItem('cartState')) || {};

fetch("https://dummyjson.com/recipes")
  .then((res) => res.json())
  .then((data) => {
   
    let newdata = data.recipes;

    searchBar.addEventListener('input',()=>{
            let userInput = searchBar.value.trim();
            console.log(userInput)
    })
    
    let k = "";

      

    newdata.forEach((x,index) => {
       
             const price = (Math.random() * (1000 - 200) + 200).toFixed(2);
             const originalprice = (Math.random() * (1000 - 200) + 200).toFixed(2);

             let newLabel = '';
             if(price < 500){
                newLabel = `<div class="new-label absolute top-0 right-0 bg-pink-300 text-white text-xs px-2 py-1 rounded-tr-lg">New</div>`;
             }  


      k += `<div class="card w-[170px] h-[240px] flex flex-col justify-around relative p-2 rounded-lg bg-white transform transition-transform duration-200 ease-in-out sm:hover:scale-105" data-id="${index}" data-new="${newLabel ? 'true' :'false'}">
           <div class="top">
             <img class="image" src="${x.image}"/>
            </div>
            <div class="label absolute top-2 left-2 px-3 py-1 text-white text-sm font-bold rounded-lg bg-gradient-to-r from-amber-400 to-amber-600 shadow-lg transform -rotate-6 translate-x-2 translate-y-2 w-[80px] text-center overflow-hidden text-ellipsis whitespace-nowrap">
               ${x.mealType}
            </div>

         
          ${newLabel}

            <div class="bottom relative">
                 <h4 class="ratingAndCount text-xs">${x.rating} <i class="fa-solid fa-star"></i> | ${x.reviewCount}</h4>
                 <p class="font-medium truncate">${x.name}</p>
                  <h5 class="price text-sm">₹${price}
                     <span class="original-price text-xs text-gray-500 line-through">
                         ₹${originalprice} </span>
                  </h5>
                  <button  class="addtocart text-xs font-bold text-red-500 absolute right-2 top-[43px] border border-green-300 px-1 py-0.5">${cardState[index] ? "ADDED" : "ADD"}</button>
                  
            </div>

     </div>
    `
    });
    container.innerHTML = k;
    loadCartState();

    function loadCartState(){
        document.querySelectorAll('.card').forEach(card=>{
            const cardId = card.dataset.id;
            const addButton = card.querySelector('.addtocart');

            if(cardState[cardId]){
                addButton.innerText ="ADDED"
                addButton.style.color = "blue"
                addButton.classList.add('carted');
            }else{
                addButton.innerText ="ADD"
                addButton.style.color = "red"
                addButton.classList.remove('carted');
            }
        })
    }
   container.addEventListener('click',(e)=>{
    if(e.target && e.target.classList.contains('addtocart')){
    const card = e.target.closest('.card')
    const cardId = card.dataset.id;
    console.log("CLICKED");
    if(e.target.innerText === "ADD"){
    e.target.innerText ="ADDED"
    tickSound.currentTime = 0;
    tickSound.play();
    e.target.style.color = "blue"
    e.target.classList.add('carted');
    cardState[cardId]="true"
    }else{
        e.target.innerText ="ADD"
        deleteSound.currentTime = 0;
        deleteSound.play();
        e.target.style.color = "red"
        e.target.classList.remove('carted');
        cardState[cardId]="false"
        delete cardState[cardId]
        localStorage.setItem('cartState', JSON.stringify(cardState));
    }
    localStorage.setItem('cartState', JSON.stringify(cardState));
    }
})

cart.addEventListener('click',()=>{
    let cartedCards = Array.from(document.querySelectorAll('.card')).filter(card => card.querySelector('.addtocart').classList.contains('carted'));
    container.innerHTML ='';
    cartedCards.forEach(card=>{
        container.appendChild(card);
    })
})

 
const offerlink = document.getElementById('offerlink');

offerlink.addEventListener('click',()=>{
    let Allcards = document.querySelectorAll('.card');

    const OfferCards = Array.from(Allcards).filter(card => card.getAttribute('data-new')=== 'true');

    container.innerHTML ='';
    OfferCards.forEach(card=>{
    container.appendChild(card);

    })
    loadCartState();
})




const all = document.getElementById('all');
all.addEventListener('click',()=>{
    container.innerHTML = k;
    loadCartState();
})

});

const navlinks = document.querySelectorAll('.navBar a');
const checkBox = document.getElementById('check')
   navlinks.forEach(link=>{
    console.log('Link clicked');
          link.addEventListener('click',()=>{
            if(window.innerWidth <=630){
                checkBox.checked = false;
            }
        })
   })



const Words = ["Chicken", "Chocolate", "Ice Cream", "Pizza", "Burger"];

let index = 0;

    function typeText() {
        searchBar.placeholder = `Search for "${Words[index]}" & more ....`;
        index = (index+1) % Words.length;
    }
 setInterval(typeText,2000);


    </script>
</body>
</html>


